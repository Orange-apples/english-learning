<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cxylm.springboot.dao.LoginRecordMapper">

    <!-- 用户访问记录 -->
    <select id="selectRecordDetail" resultType="com.cxylm.springboot.dto.result.LoginRecordDto">
        select user_id, COUNT(DISTINCT id) count,DATE_FORMAT(login_time,'%Y-%m-%d') loginTime from login_record
        where user_id = #{userId}
        GROUP BY DATE_FORMAT(login_time,'%Y-%m-%d') ORDER BY loginTime DESC
    </select>

    <!-- 今日使用数 -->
    <select id="selectTodayUse" resultType="java.lang.Integer">
        select COUNT(id) count from login_record
        where school_id = #{schoolUserId} AND to_days(login_time) = to_days(now())
    </select>

    <!-- 使用记录 -->
    <select id="selectRecordList" resultType="com.cxylm.springboot.dto.result.LoginRecordDto">
        select COUNT(DISTINCT id) count,DATE_FORMAT(login_time,'%Y-%m-%d') loginTime from login_record
        GROUP BY DATE_FORMAT(login_time,'%Y-%m-%d') ORDER BY loginTime DESC
    </select>
</mapper>